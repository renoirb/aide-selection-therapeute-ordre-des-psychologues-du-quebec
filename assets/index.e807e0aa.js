const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))d(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&d(a)}).observe(document,{childList:!0,subtree:!0});function l(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(i){if(i.ep)return;i.ep=!0;const c=l(i);fetch(i.href,c)}};k();const D=["10108","10136","10282","10500","10710","10757","10792","10892","10913","10952","10982","10982","11021","11081","11185","11333","11334","11379","11408","11462","11512","11519","11525","11603","11607","11607","11742","11742","11756","11788","11842","11924","11924","11965","12062","12108","12184","12210","12283","12288","12358","12466","12611","12617","12717","12829","12854","12953","13183","13366","13438","13461","13485","13494","13604","13687","13748","13966","14233","1438","14564","14580","14620","14725","14898","14959","14959","14984","1728","1806","1890","1890","1907","2074","2374","2444","2624","2710","2828","2922","3116","3116","3233","3237","3273","3274","3376","3446","3521","3595","3613","3915","3990","3993","4216","4384","4442","4456","4552","4590","4653","4706","4756","4794","4839","4853","4909","5043","5069","5089","5143","5203","5233","5292","5308","5370","5395","5459","5491","5567","5574","5592","5592","5599","5714","5787","5885","5906","5950","5950","6047","6047","6067","6110","6184","6240","6268","6284","6450","6468","6595","66","66","6647","6782","694","8598","8620","915","9175","9434","9574","9600","9641","9730","9952"],$=t=>`https://www.ordrepsy.qc.ca/voir/psychologue/${t}`,A=t=>t.replace("https://www.ordrepsy.qc.ca/voir/psychologue/",""),y=(t,e)=>{const d=e.localStorage.getItem(t)===null,i=n=>{const r=new Set(n);return n.filter(s=>r.has(s)?(r.delete(s),!1):!0)},c=n=>{var s;const r=(s=e.localStorage.getItem(n))!=null?s:"[]",o=[];if(d===!1)try{const f=JSON.parse(r);o.push(...f)}catch(f){console.log(`Something went wrong on LocalStorage.getItem("${t}")`,f)}return o},a=c(t);d&&e.localStorage.setItem(t,JSON.stringify(a));const u={storageKey:t,get items(){return c(t)},add(n){const o=c(t).filter(f=>f!==n).sort(),s=i(o);s.includes(n)?console.log(`${t} add(${n}), found duplicate, not adding`,{foundDuplicates:s}):(o.push(n),e.localStorage.setItem(t,JSON.stringify(o)))},remove(n){const o=c(t).filter(f=>f!==n).sort(),s=i(o);s.includes(n)&&console.log(`${t} remove(${n}), found duplicate`,{foundDuplicates:s}),e.localStorage.setItem(t,JSON.stringify(o))}};return Object.freeze(u.storageKey),u},O=["candidate","no","maybe","maybe_not"],q=new Set(O),C=t=>q.has(t),x=(t,e)=>{t.dispatchEvent(new CustomEvent("prise-de-decision",{bubbles:!0,composed:!0,detail:e}))},b=new Map,T=t=>{const e=t.target,l=e&&e.tagName.toLowerCase()==="button",d=e&&e.tagName.toLowerCase()==="input"&&e.type=="checkbox";if(l===!1&&d===!1)return;const{value:i}=e,[c,a]=String(i).split(":");if(C(c)===!1){const u=`Invalid decision value "${c}"`;throw new Error(u)}if(l&&C(c)){t.preventDefault();const u={id:a,decision:c};x(e,u);let n=e.parentElement;if(u.decision==="no"){n==null||n.setAttribute("disabled"," "),n==null||n.setAttribute("style","text-decoration:line-through;");const o=b.has(a)?b.get(a):null;o&&(b.delete(a),o.close())}}else if(d&&/^maybe/.test(c)){const[u,...n]=String(e.name).split(":"),{checked:r=!1}=e;if(n.length>1){const s="You are playing with fire, are you?";throw new Error(s)}x(e,{id:a,decision:r?"maybe":"maybe_not",domain:u})}},w=(t,e)=>{const l=$(e),i=t.ownerDocument.createElement("li");i.dataset.psyId=e,i.classList.add("mb-3","row");const u=new URL(window.location.href).searchParams.getAll("domain").filter(n=>n!=="").map(n=>`<input type=checkbox name="${n}:${e}" value="maybe:${e}" title="${n}" />`);i.innerHTML=`
    <fieldset name="option-${e}">
      <button type="button" class="btn btn-light" value="no:${e}">Non</button>
      <button type="button" class="btn btn-light" value="candidate:${e}">Candidat</button>
      ${u.join(" ")}
      <a href="${l}" target="_blank">${l}</a>
    </fieldset>
  `,t.insertBefore(i,t.firstChild)},P=(t,e)=>{const l=t.target;if(l.tagName.toLowerCase()!=="select")return;const{value:d=null}=l,c=l.ownerDocument.defaultView;if(!c)throw new Error("Something unexpected that should not happen, happened. Kekchose que je sais pas.");if(typeof d=="string"){for(const r of Array.from(l.children))r.getAttribute("value")===d&&l.removeChild(r);const a=A(d),u=c.open(d,`prychologue-${a}`);u&&b.set(a,u),w(e,a);const n=l.nextElementSibling;if(n){const r=Array.from(l.children);n.textContent=String(r.length-1)}}},U=document.querySelector("#app"),S=new URL(window.location.href);let R=S.searchParams.getAll("domain").filter(t=>t!=="");if(R.length<1){for(const t of["anxiety","work-stress","burnout"])S.searchParams.append("domain",t);window.location.href=S.href}if(U){const t=y("ids_no",window),e=y("ids_candidate",window),l=y("checkboxes",window),d=o=>{const{detail:s}=o;if(s.decision==="candidate")e.add(s.id);else if(s.decision==="no")t.add(s.id);else if(/^maybe/.test(s.decision)&&s.domain){const f=`${s.domain}:${s.id}`;s.decision==="maybe_not"?l.remove(f):l.add(f)}},i=o=>{var p;const{target:s,relatedNode:f}=o;if(s&&f&&f.nodeName.toLowerCase()==="ul"){const h=s,{psyId:g=""}=(p=h.dataset)!=null?p:{},E=g!==""&&t.items.includes(g),v=l.items.filter(m=>m.split(":")[1]===g);if(E){const m=h.querySelector("fieldset:first-child");m==null||m.setAttribute("disabled"," "),m==null||m.setAttribute("style","text-decoration:line-through;")}const L=h.parentNode;if(v.length>0&&L)for(const m of v){const I=L.querySelector(`input[type=checkbox][name="${m}"]`);I&&I.setAttribute("checked","")}}},c=(o,s)=>{const f=e.items.includes(o),p=e.items.includes(s);return f===!0&&p===!1?-1:p===!0&&f===!1?1:0},a=[...new Set(D)].sort().filter(o=>!t.items.includes(o)).filter(o=>!e.items.includes(o)).sort((o,s)=>c(s,o)),u=a.map(o=>`<option value="${$(o)}">${o}${e.items.includes(o)?" ** ":""}</option>`);document.querySelector("#app").innerHTML=`
  <h1>Aide \xE0 la s\xE9lection d\u2019un psychologue de <a href="https://www.ordrepsy.qc.ca/" target=_blank>l\u2019Ordre des psychologues du Qu\xE9bec</a></h1>
  <div>
    <label for="membres">Voir un membre: </label>
    <select id="membres"><option selected>...</option>${u}</select>&nbsp;&nbsp;<span><data id="count">${a.length}</data> \xE0 voir</span>
  </div>
  `;const n=document.createElement("form");n.setAttribute("style","margin:20px auto;max-width:800px;text-align:left;");const r=document.createElement("ul");r.style.listStyleType="none",r.style.padding="0",r.classList.add("container"),n.appendChild(r),document.querySelector("#app").appendChild(n),document.addEventListener("change",o=>P(o,r)),document.addEventListener("click",T),document.addEventListener("prise-de-decision",d),document.addEventListener("DOMNodeInserted",i,!1);for(const o of t.items)w(r,o);for(const o of e.items)w(r,o)}
